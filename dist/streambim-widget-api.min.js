!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){"use strict";var r=()=>{const e=[];let n=!1;return{destroy(t){n=!0,e.forEach(e=>{e(t)})},onDestroy(t){n?t():e.push(t)}}};var o,i,a,c,s,d=e=>(...n)=>{e&&console.log("[Penpal]",...n)};!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(o||(o={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(i||(i={})),function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NotInIframe="NotInIframe",e.NoIframeSrc="NoIframeSrc"}(a||(a={})),function(e){e.DataCloneError="DataCloneError"}(c||(c={})),function(e){e.Message="message"}(s||(s={}));const l=({name:e,message:n,stack:t})=>({name:e,message:n,stack:t});var u=(e,n,t)=>{const{localName:r,local:a,remote:d,originForSending:u,originForReceiving:f}=e;let p=!1;const m=e=>{if(e.source!==d||e.data.penpal!==o.Call)return;if(e.origin!==f)return void t(`${r} received message from origin ${e.origin} which did not match expected origin ${f}`);const a=e.data,{methodName:s,args:m,id:g}=a;t(`${r}: Received ${s}() call`);const y=e=>n=>{if(t(`${r}: Sending ${s}() reply`),p)return void t(`${r}: Unable to send ${s}() reply due to destroyed connection`);const a={penpal:o.Reply,id:g,resolution:e,returnValue:n};e===i.Rejected&&n instanceof Error&&(a.returnValue=l(n),a.returnValueIsError=!0);try{d.postMessage(a,u)}catch(e){if(e.name===c.DataCloneError){const n={penpal:o.Reply,id:g,resolution:i.Rejected,returnValue:l(e),returnValueIsError:!0};d.postMessage(n,u)}throw e}};new Promise(e=>e(n[s].apply(n,m))).then(y(i.Fulfilled),y(i.Rejected))};return a.addEventListener(s.Message,m),()=>{p=!0,a.removeEventListener(s.Message,m)}};let f=0;var p=(e,n,t,r,c)=>{const{localName:d,local:l,remote:u,originForSending:p,originForReceiving:m}=n;let g=!1;c(d+": Connecting call sender");const y=e=>(...n)=>{let t;c(`${d}: Sending ${e}() call`);try{u.closed&&(t=!0)}catch(e){t=!0}if(t&&r(),g){const n=new Error(`Unable to send ${e}() call due to destroyed connection`);throw n.code=a.ConnectionDestroyed,n}return new Promise((t,r)=>{const a=++f,g=n=>{if(n.source!==u||n.data.penpal!==o.Reply||n.data.id!==a)return;if(n.origin!==m)return void c(`${d} received message from origin ${n.origin} which did not match expected origin ${m}`);const f=n.data;c(`${d}: Received ${e}() reply`),l.removeEventListener(s.Message,g);let p=f.returnValue;f.returnValueIsError&&(p=(e=>{const n=new Error;return Object.keys(e).forEach(t=>n[t]=e[t]),n})(p)),(f.resolution===i.Fulfilled?t:r)(p)};l.addEventListener(s.Message,g);const y={penpal:o.Call,id:a,methodName:e,args:n};u.postMessage(y,p)})};return t.reduce((e,n)=>(e[n]=y(n),e),e),()=>{g=!0}};var m=(e,n)=>{let t;return void 0!==e&&(t=window.setTimeout(()=>{const t=new Error(`Connection timed out after ${e}ms`);t.code=a.ConnectionTimeout,n(t)},e)),()=>{clearTimeout(t)}};var g=(e={})=>{const{parentOrigin:n="*",methods:t={},timeout:i,debug:c=!1}=e,l=d(c),f=r(),{destroy:g,onDestroy:y}=f;(()=>{if(window===window.top){const e=new Error("connectToParent() must be called within an iframe");throw e.code=a.NotInIframe,e}})();const h=((e,n,t,r)=>{const{destroy:i,onDestroy:a}=t;return t=>{if(!(e instanceof RegExp?e.test(t.origin):"*"===e||e===t.origin))return void r(`Child: Handshake - Received SYN-ACK from origin ${t.origin} which did not match expected origin ${e}`);r("Child: Handshake - Received SYN-ACK, responding with ACK");const c="null"===t.origin?"*":t.origin,s={penpal:o.Ack,methodNames:Object.keys(n)};window.parent.postMessage(s,c);const d={localName:"Child",local:window,remote:window.parent,originForSending:c,originForReceiving:t.origin},l=u(d,n,r);a(l);const f={},m=p(f,d,t.data.methodNames,i,r);return a(m),f}})(n,t,f,l);return{promise:new Promise((e,t)=>{const r=m(i,g),c=n=>{if((()=>{try{clearTimeout()}catch(e){return!1}return!0})()&&n.source===parent&&n.data&&n.data.penpal===o.SynAck){const t=h(n);t&&(window.removeEventListener(s.Message,c),r(),e(t))}};window.addEventListener(s.Message,c),(()=>{l("Child: Handshake - Sending SYN");const e={penpal:o.Syn},t=n instanceof RegExp?"*":n;window.parent.postMessage(e,t)})(),y(e=>{window.removeEventListener(s.Message,c),e||((e=new Error("Connection destroyed")).code=a.ConnectionDestroyed),t(e)})}),destroy(){g()}}};t.d(n,"a",(function(){return g}))},function(e,n,t){"use strict";t.r(n),function(e){var n,r,o=t(0);
/*!
 * StreamBIM widget API
 *
 * A JavaScript library for interacting with 
 * StreamBIM from within an embedded widget
 * https://github.com/streambim
 *
 * MIT License | (c) Rendra AS 2019
 */n=window,r=function(){return{connect(e={}){return this._connection=Object(o.a)({methods:e}),this._connection.promise.then(e=>{this._parent=e,Object.keys(e).forEach(e=>{this[e]=n=>(console.assert(this._parent,"StreamBIM parent frame not found"),this._parent[e](n))})})}}},e.exports?e.exports=r():"function"==typeof define&&t(3)?define("StreamBIM",r):n.StreamBIM=r()}.call(this,t(2)(e))},function(e,n){e.exports=function(e){if(!e.webpackPolyfill){var n=Object.create(e);n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),Object.defineProperty(n,"exports",{enumerable:!0}),n.webpackPolyfill=1}return n}},function(e,n){(function(n){e.exports=n}).call(this,{})}]);